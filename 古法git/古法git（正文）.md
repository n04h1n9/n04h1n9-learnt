# 古法git

## 前言  

git是很好用的版本管理工具~~和网盘上传工具~~,但因其配置过于复杂和命令过于繁杂，以至于上手门槛高，命令记忆困难，我也经常忘命令，于是就有了这篇文章（虽说有图形界面，但我还是觉得古法git更有一番韵味）

> 本教程默认你有git,如果没有，`sudo pacman -S git`

## 初始化本地仓库（扫干净屋子再请客）

新建一个文件夹，用于建本地仓库

```
git init
```

## 连接到远程仓库

- 先绑定用户名和邮箱：

```
git config --global user.name "用户名"
git config --global user.name "邮箱" # 两条命令的双引号也要输进去
```

- 用ssh绑定远程仓库

1. `sudo pacman -S openssh`下载ssh工具，至于ssh是什么，看[这里](https://www.cainiaojc.com/ssh/ssh-basic.html)
2. 输入`ssh-keygen -t rsa -C [邮箱]`中括号不用输

3. 按照指引走，看到一段ascii图就说明成功了，此时找到public那行，进入上面说的文件目录，复制里面的内容

4. 打开github,点击自己的头像，选择settings,找到ssh and gpg keys选项，点击new ssh key,title中随便输一个名字，并把刚刚复制的字符粘贴到输入框中

5. 回到终端，输入ssh -T git@github.com,看到hi就完成了，此时你的电脑就跟你的github账号完成了绑定

- 操作远程仓库

  - clone别人的项目到自己本地（只嫖别人的东西的话不用大费周章连ssh,但我们要生产些东西到github）：
  ```
  git clone [仓库链接，项目主页点绿色的code键看到的http地址]
  ```

  - 将自己的本地仓库绑定到github远程仓库（干这个要ssh）：

  ```
  git remote add origin [仓库链接] #origin是远程仓库的别名，也可以是其他名字
  ```

## 使用git进行代码的版本控制

恭喜你完成了远程仓库的有关事项，接下来让我们把视线放到本地仓库，
感受git在版本控制这一块的统治力

### 分支与合并

#### 设想一下有这么两个场景：

1. 我是凑企鹅，我正在跟粉毛奶龙开发同一个项目。但他写完了代码没经我们达成一致意见就给把代码提交到github上了，后来出问题了，用户纷纷对我喊道“主唱太不拼命了”，我很生气

2. 我是粉毛奶龙，我要为我和凑企鹅的项目添加一个英文版，我刚好去过英国留学，所以这事自然而然成我干了，我得写两份代码，我很烦

针对以上场景，git引入了“分支”的概念，多人协作时，应先将代码写到区别于主分支（git默认是master分支，但github上默认是main分支）的另一分支（通常叫develop分支）~~，当然你自己写的时候谁管你这个那个的~~。对于一个额外的英文版（或是其他什么版），也可以通过创建分支解决，只需在分支上分别翻译就行了，不用吃二遍苦

#### 以下是分支有关操作：
```
git branch #查看当前项目有什么分支，高亮分支则是自己所处分支
git checkout -b develop #创建并跳转到develop分支
git checkout [分支名] #跳转到某分支，方括号不用打
git merge [要合并的分支] #把选定分支的代码合并到自己所处分支，也就是常说的合并代码，方括号不用打
```

### 提交代码

这个其实就两步，说是提交代码，其实其他文件也可以上传，这就是我喜欢古法git的原因

```
git add . #放到暂存区
git commit -m "信息，不想填的话去掉-m和这段" #正式提交，经常说的commit就是这个
```

### 推送和拉取

commit到本地仓库后，我们还要上传给队友品鉴，我们有时也要品鉴队友或自己的代码，所以要推送和拉取代码，命令如下：
```
git pull [仓库别名] [分支] #拉取代码到本地
git push [仓库别名] [本地分支]:[远程分支] #推送本地代码，俩命令方括号不用打
```

> tip:如果远程仓库跟本地不一致的话，git不让你push。你得先pull,确保本地仓库跟远程仓库一样，再push

### 历史与回溯

所谓版本控制，查看历史和回档是必不可少的操作，以下是相关命令：
```
git log #查看历史，后面加--stat可以看到修改了什么文件，对我们来说最重要的信息是commit id  

#以下命令方括号不用打
git diff [commit id] #查看某次commit具体修改了什么
git reset [commit id]
git checkout [commit id] #这俩用于回溯代码，相当于回档，用哪个都行
```

### 学到这里，你就可以用git完成代码提交和版本控制了（~~以及管理github网盘~~），看个[电子榨菜](https://www.bilibili.com/video/BV1pwC6BxEeb/ "咕咕嘎嘎")放松一下罢，看懂这个的话，我只能说：

## 🎉恭喜通关🎉
