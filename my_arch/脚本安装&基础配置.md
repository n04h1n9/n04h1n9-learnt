# 脚本安装和基础配置  
### 脚本安装  
arch的脚本安装其实没什么太多好讲的，但其中有些坑点，为方便抄作业和逃课，以及避免踩坑，还是写一下好一点（本人长期arch单系统，且用linux时间比用win还长，故该文档不涉及任何与win相关的东西），步骤如下：

- 准备好一个烧录ventoy的u盘，往里面复制最新的arch镜像（清华大学开源软件镜像站有，每个月一号发），找到你要装系统的的电脑，拿u盘往里怼

- 开机（或者重启），在出现电脑logo的时候按某个能让你进bios的键（按什么键自己上网搜“某某电脑进bios方法”），从中找到选择硬盘的选项，选择你用于安装系统的u盘启动
> tip:我的thinkpadx220有些特殊，按f1进bios,按f12单独选硬盘，我们进bios是为了选硬盘，所以我按f12

> 为什么你们进bios都喜欢狂摁啊，我更喜欢摁一下（逃）

- 按引导进入安装环境（没引导的地方就闭眼按回车），没多久你就能看见一个黑色的命令行界面，你可以在里面输命令

- 如果你的电脑插有网线，跳到下一步，如果没有，输入：

```
iwctl
```

看到提示符出现变化后输入：

```
station wlan0 connect (你的、不能是中文的wifi名，括号不用输)
```

他会提示你输密码，完了按ctrl+d退出iwctl,此时你可以看到提示符变回来了

> tip:iwctl是一个叫iwd的软件提供的命令行连接wifi的工具，ctl意为control,以后还会遇到好些以ctl结尾的命令

- 输入以下命令以同步数据库并更新：

```
pacman -Sy
```

> tip:pacman是arch及其衍生发行版的包管理器（下载软件包的地方，以后要用到的东西都可以从这下，可以理解为应用商店，但功能远比应用商店强大，可下载的东西也远比应用商店多，不要以为这个“应用商店”是手机那种限制你下载渠道的玩意），-Sy意为同步数据库并安装

- 要来力（喜）

- 输入`archinstall`正式进入脚本，此前我们所做的所有事情都是为了调出这玩意

- 第一项显示这个脚本呈现出来的语言不用改，改了会乱码（反正也没有插你死给你改）

- 第二项改locale,enter进去改第二项locale language，改成en_GB,这么做是为了规避默认en_US的夏令时、12小时制，默认打印纸张规格也是和我们中国一样用的a4,如果你能接受美国那边的习惯可以不改

- 第三项设置镜像源，下载软件用的，点进去，第一个select region选择China,第三个op开头懒得打了用来拓展你的软件仓库，如果你打游戏的话把multilib勾上，tab勾选，，其他的实验性仓库你想勾就勾，从实验性仓库下的东西一般版本更新，但更不稳定

- 第四项是最难的一步，也是很容易踩坑的一步：磁盘分区。enter进入disk configuration,继续回车可以看到三个选项，此时千万不要选第一个（推荐分区），如果不想使用更强大的回档功能的话（使用推荐分区可以回档，但会出现一些问题，也不是不能用）  

正确的方法可以看[shorin老哥的教程有关脚本安装的地方](https://www.bilibili.com/video/BV19DBqB4EY4)，我就是跟他学的（主要是我手头上也没有空电脑让我复现，而且我人又懒又怕麻烦，再重装的话前面的坑我还是会踩，反正影响不大，又不是不能回档了）

- 后面就简单了，swap那项不用动，他默认是开的。bootloader可以选默认的systemboot（轻量，单系统足够了），也可以选功能强大，教程最多的grub。
kernel（内核）通常有三个可选项：默认、lts、zen（可以多选，还有一个是服务器用的）,默认功耗低、zen性能强、lts稳定，看你自己需求。hostname（主机名）看你自己喜好，可以保持默认。再下一项设置账户和密码的话也照做就行了。再下一项profile是用来设置桌面环境和显卡驱动的，桌面环境如果是第一次用linux的话建议desktop->kde,驱动看自己显卡型号选。如果想照抄我的配置的话选minimal（这里有个坑点：显示管理器（greeter别选ly,会报错，**修复了的话issue吱我一声**）。application的话看自己需求：

  - 如果选有zen内核或lts内核，勾上(选有哪个勾哪个)：  
  ```
  linux-zen-headers
  linux-lts-headers
  ```

  - 如果想抄我的配置：
  ```
  yazi #终端文件管理器
  kitty #终端
  vim
  neovim
  7zip #压缩用的
  firefox #浏览器
  fcitx5-im
  fcitx-chinese-addons #这俩是输入法
  fastfetch #装逼用的,也可以拿来查看系统信息
  ```

> tip:左斜杠（/）可以进入搜索模式

最后是时区设上海（~~别找了没有北京~~，因为上海人口最多）

最后检查一遍，install,起飞！

飞机降落后（脚本运行完了后），reboot重启，登录你的账户，此时我们还要做点小修补：

1. `sudo vim /etc/locale.gen`进入一个叫locale.gen的文件，左斜杠进入搜索模式，搜索zh，enter进入搜索的结果，上下左右或kjhl移动光标，把光标移动到zh_CN.UTF-8前面的#（注释）按x删除，在确保左下角没有---insert---这类的字样后依次按：wq保存并退出，出来后输入`locale-gen`完成时区本地化设置

> tips:1. `sudo`用于获取root权，即linux的最高权限（如果你登录的是root账户的话则默认拥有root权，无需提权  
> 2. vim是及其强大但又上手门槛极高的文本编辑器，neovim是其儿子，操作逻辑一样，但插件系统更丰富，装了插件后能作为完整的代码编辑器（虽说用vim做简单的代码和文本编辑也是完全够用），默认情况下vim更好用，但经过配置后neovim更好用，所以我两个都装，配置好了再用neovim,至于详细使用和配置教程，以后有时间会出）

2. `sudo vim /etc/pacman.conf`配置强大的cn源，顾名思义，这是给国内用户提供便利的仓库，有了它，就不会陷入“下梯子的前提条件是有梯子”的悖论了，除此之外，大大降低了国内arch用户对梯子的依赖程度。先按大写G移动光标到底，小写o新开一行并进入编辑模式（此外，还有i和a可进入编辑模式，用途更广），此时左下角会出现---insert---字样。此时写入：
```
[archlinuxcn]
Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch
```

`sudo pacman -Sy archlinuxcn-keyring`安装密钥就成了

3. 如果你想照抄我的配置的话，依次输入：
```
sudo pacman -S niri paru xwayland-satellite ly noto-fonts noto-fonts-emoji way-zenhei #出选项选wlr那个
paru -S noctalia-shell
sudo systemctl disable --now getty@tty2.service
sudo systemctl enable --now ly @tty2.service
```

## 恭喜通关🎉
